---
title: "Introduction to SQL Programming"
#author: "First Last"
#date: YYYY-MM-DD
output: html_document
---

<!-- The file analysis/chunks.R contains chunks that define default settings
shared across the workflowr files. -->
```{r read-chunk, include=FALSE, cache=FALSE}
knitr::read_chunk("chunks.R")
```

<!-- Update knitr chunk options -->
```{r knitr-opts-chunk, include=FALSE}
```

<!-- Insert the date the file was last updated -->
```{r last-updated, echo=FALSE, results='asis'}
```

<!-- Insert the code version (Git commit SHA1) if Git repository exists and R
 package git2r is installed -->
```{r code-version, echo=FALSE, results='asis'}
```
1. Introduction to Relational Database and SQL
  1.1 Relational Databases
  A *relational database* organizes data in *tables.* A *table* has *rows* (or *records*) and *columns* (or *fields*). Tables are *related* based on common columns to eliminate *data redundancy* and ensure *data integrity*.
  
  1.2 Structured Query Language
  A high-level language designed for interacting with the relational databases. `SQL` defines a set of commands, such as `SELECT`, `INSERT`, `UPDATE`, DELETE, `CREATE` `TABLE`, `DROP TABLE`, etc.
  
  1.3  SQL By Examples
  A relational database system contains many `databases`. A database comprises one or more `tables`. A table have `rows` (or `records`) and `columns` (or `fields`).
Suppose we have created a table called `class101`, in a database called `studentdb`, with 3 columns: `id`, `name` and `gpa`. A column has a data type. We choose: `INT` (integer) for column `id`, `FLOAT` (floating-point number) for `gpa`, and `VARCHAR(50)` (variable-length string of up to 50 characters) for name. There are 4 rows in the table as follows:
```{r}
library(RSQLite)
conn <- dbConnect(SQLite(), "C:/Users/J059666/Documents/r projects/data/database.sqlite")
```



```{sql connection=conn, eval = FALSE}

-- SYNTAX
SELECT column1, column2, ... FROM tableName WHERE criteria
SELECT * FROM tableName WHERE criteria
 
-- EXAMPLES
SELECT name, gpa FROM class101
   -- Select columns name and gpa from table class101.
   +--------------+------+
   | name         | gpa  |
   +--------------+------+
   | Tan Ah Teck  |  4.5 |
   | Mohammed Ali |  4.8 |
   | Kumar        |  4.8 |
   | Kevin Jones  |  4.6 |
   +--------------+------+
 
SELECT * FROM class101
   -- Select ALL columns from table class101.
   -- The wildcard * denotes all the columns.
   +------+--------------+------+
   | id   | name         | gpa  |
   +------+--------------+------+
   | 1001 | Tan Ah Teck  |  4.5 |
   | 1002 | Mohammed Ali |  4.8 |
   | 1003 | Kumar        |  4.8 |
   | 1004 | Kevin Jones  |  4.6 |
   +------+--------------+------+
 
SELECT name, gpa FROM class101 WHERE gpa >= 4.7
   -- Select columns name and gpa, where the rows meet the criteria.
   -- You can compare numbers using =, >, <, >=, <=, <> (!=)
   +--------------+------+
   | name         | gpa  |
   +--------------+------+
   | Mohammed Ali |  4.8 |
   | Kumar        |  4.8 |
   +--------------+------+
    
SELECT name, gpa FROM class101 WHERE name = 'Tan Ah Teck'
   -- Full-match (= or !=) on string. Strings are enclosed in quotes.
   +-------------+------+
   | name        | gpa  |
   +-------------+------+
   | Tan Ah Teck |  4.5 |
   +-------------+------+
 
SELECT name FROM class101 WHERE name LIKE 'k%'
   -- Use "LIKE" for string pattern-matching, with
   --   wildcard % matches zero or more (any) characters;
   --   wildcard _ matches one (any) character.
   +-------------+
   | name        |
   +-------------+
   | Kumar       |
   | Kevin Jones |
   +-------------+
 
SELECT * FROM class101 WHERE gpa > 4 AND name LIKE 'k%' ORDER BY gpa DESC, name ASC
   -- Use AND, OR, NOT to combine simple conditions.
   -- Order the results in DESC (descending) or ASC (Ascending)
   +------+-------------+------+
   | id   | name        | gpa  |
   +------+-------------+------+
   | 1003 | Kumar       |  4.8 |
   | 1004 | Kevin Jones |  4.6 |
   +------+-------------+------+

```
